"use strict";(self.webpackChunkdev_docs=self.webpackChunkdev_docs||[]).push([[399],{535:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"apps/mobile-app","title":"Mobile App README","description":"(Source: apps/mobileAppYC/README.md)","source":"@site/docs/apps/mobile-app.md","sourceDirName":"apps","slug":"/apps/mobile-app","permalink":"/dev-docs/apps/mobile-app","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":null,"frontMatter":{"id":"mobile-app","title":"Mobile App README","slug":"/apps/mobile-app"},"sidebar":"docs","previous":{"title":"Backend App README","permalink":"/dev-docs/apps/backend"},"next":{"title":"Contributing Guide","permalink":"/dev-docs/policies/contributing"}}');var r=i(5723),t=i(2303);const o={id:"mobile-app",title:"Mobile App README",slug:"/apps/mobile-app"},l=void 0,a={},c=[{value:"\ud83d\udee0\ufe0f Getting Started",id:"\ufe0f-getting-started",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Step 1: Configure Your AWS Credentials",id:"step-1-configure-your-aws-credentials",level:3},{value:"Step 2: Install Monorepo Dependencies",id:"step-2-install-monorepo-dependencies",level:3},{value:"Step 3: Set up AWS Amplify Sandbox",id:"step-3-set-up-aws-amplify-sandbox",level:3},{value:"Step 4: Configure Environment Credentials (Crucial!)",id:"step-4-configure-environment-credentials-crucial",level:3},{value:"A. JavaScript Variables",id:"a-javascript-variables",level:4},{value:"B. Android Native Configuration",id:"b-android-native-configuration",level:4},{value:"C. iOS Native Configuration",id:"c-ios-native-configuration",level:4},{value:"Step 5: Update Application Identifiers",id:"step-5-update-application-identifiers",level:3},{value:"Step 6: Run The Application",id:"step-6-run-the-application",level:3},{value:"1. Start the Metro Server",id:"1-start-the-metro-server",level:4},{value:"2. Build for Android or iOS",id:"2-build-for-android-or-ios",level:4},{value:"\u25b6\ufe0f Android",id:"\ufe0f-android",level:5},{value:"\u25b6\ufe0f iOS",id:"\ufe0f-ios",level:5},{value:"\ud83d\udc1b Troubleshooting",id:"-troubleshooting",level:2},{value:"\u26a0\ufe0f Known Issues",id:"\ufe0f-known-issues",level:2},{value:"\ud83d\ude4c Contributing",id:"-contributing",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"(Source: apps/mobileAppYC/README.md)"}),"\n",(0,r.jsx)("p",{align:"center",children:(0,r.jsx)("a",{href:"https://yosemitecrew.com/",children:(0,r.jsx)("img",{src:"https://d2il6osz49gpup.cloudfront.net/YC.svg",width:"150px",alt:"Yosemite Crew Logo"})})}),"\n",(0,r.jsx)("h1",{align:"center",children:"Yosemite Crew Mobile App"}),"\n",(0,r.jsx)("div",{align:"center",children:(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://reactnative.dev",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/badge/React%20Native-0.81.4-61DAFB?logo=react",alt:"React Native 0.81.4"})}),"\n",(0,r.jsx)(n.a,{href:"https://pnpm.io",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/badge/pnpm-F69220?logo=pnpm",alt:"PNPM"})}),"\n",(0,r.jsx)(n.a,{href:"https://www.typescriptlang.org/",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/badge/TypeScript-3178C6?logo=typescript",alt:"TypeScript"})}),"\n",(0,r.jsx)(n.a,{href:"https://github.com/YosemiteCrew/Yosemite-Crew/blob/main/CONTRIBUTING.md",children:(0,r.jsx)(n.img,{src:"https://img.shields.io/badge/Contribute-FF9800",alt:"Contributing"})}),"\n",(0,r.jsx)(n.a,{href:"https://sonarcloud.io/summary/new_code?id=yosemitecrew_Yosemite-Crew_MobileAppYC",children:(0,r.jsx)(n.img,{src:"https://sonarcloud.io/api/project_badges/measure?project=yosemitecrew_Yosemite-Crew_MobileAppYC&metric=coverage",alt:"Coverage"})})]})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["This directory contains the React Native mobile application for the ",(0,r.jsx)(n.strong,{children:"Yosemite Crew"})," open-source operating system for animal health. This app serves as the primary interface for companion owners to connect with veterinary clinics and manage their companion's health."]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-getting-started",children:"\ud83d\udee0\ufe0f Getting Started"}),"\n",(0,r.jsx)(n.p,{children:"This guide will walk you through setting up the mobile app on your local machine for development."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Node.js"}),": Version ",(0,r.jsx)(n.code,{children:"20"})," or higher."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"pnpm"}),": Ensure you have ",(0,r.jsx)(n.code,{children:"pnpm"})," installed globally."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"React Native Environment"}),": You ",(0,r.jsx)(n.strong,{children:"must"}),' complete the official setup guide for your OS and target platform (Android/iOS). Follow the instructions under the "',(0,r.jsx)(n.strong,{children:"React Native CLI Quickstart"}),'" tab.',"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://reactnative.dev/docs/set-up-your-environment",children:(0,r.jsx)(n.strong,{children:"React Native Environment Setup Guide"})})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ruby and Bundler"}),": Required for managing iOS dependencies (CocoaPods)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"AWS Account & IAM User"}),": An active AWS account is required to run the backend."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-1-configure-your-aws-credentials",children:"Step 1: Configure Your AWS Credentials"}),"\n",(0,r.jsx)(n.p,{children:"Before you begin, the AWS Amplify CLI needs credentials to deploy resources to your AWS account."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create an IAM User"}),": In your AWS account, create a new IAM user with ",(0,r.jsx)(n.strong,{children:"AdministratorAccess"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Get Access Keys"}),": Generate an ",(0,r.jsx)(n.strong,{children:"Access Key ID"})," and a ",(0,r.jsx)(n.strong,{children:"Secret Access Key"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Configure Your Local Machine"}),": Configure the AWS CLI on your machine by running ",(0,r.jsx)(n.code,{children:"aws configure"})," and providing the keys you generated. The Amplify CLI uses these credentials automatically."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Install the AWS CLI if you haven't already\n# Then, configure it with your IAM user credentials\naws configure\nAWS Access Key ID [None]: YOUR_ACCESS_KEY_ID\nAWS Secret Access Key [None]: YOUR_SECRET_ACCESS_KEY\nDefault region name [None]: us-east-1\nDefault output format [None]: json\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-2-install-monorepo-dependencies",children:"Step 2: Install Monorepo Dependencies"}),"\n",(0,r.jsxs)(n.p,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"root"})," of the entire ",(0,r.jsx)(n.code,{children:"Yosemite-Crew"})," monorepo (not this folder) and install all project dependencies using ",(0,r.jsx)(n.code,{children:"pnpm"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# From the root of the Yosemite-Crew project\npnpm install\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-3-set-up-aws-amplify-sandbox",children:"Step 3: Set up AWS Amplify Sandbox"}),"\n",(0,r.jsx)(n.p,{children:"This project uses AWS Amplify for its backend. Run a local sandbox environment that connects to your configured AWS account."}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Start the sandbox"}),". This will deploy a development backend to your AWS account."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"npx ampx sandbox\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Set the required secrets"}),". You must have a ",(0,r.jsx)(n.strong,{children:"verified sender identity in Amazon SES"})," (Simple Email Service) for passwordless OTP emails to work."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Replace YOUR_VERIFIED_EMAIL@example.com with your verified SES email address\nnpx ampx sandbox secret set PASSWORDLESS_OTP_EMAIL_FROM YOUR_VERIFIED_EMAIL@example.com\n\n# This secret is optional if you are not mocking a custom user service\nnpx ampx sandbox secret set CUSTOM_USER_SERVICE_URL\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Grant Email Permissions in AWS IAM"}),". The Cognito IAM role generated by the sandbox needs permission to send emails through SES."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"IAM console"})," in your AWS account."]}),"\n",(0,r.jsxs)(n.li,{children:["Find the unauthenticated IAM role associated with your Cognito Identity Pool (its name will be similar to ",(0,r.jsx)(n.code,{children:"amplify-....-unauth-role"}),")."]}),"\n",(0,r.jsx)(n.li,{children:"Attach a new inline policy with the following JSON."}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Action": [\n                "ses:SendEmail",\n                "ses:SendRawEmail"\n            ],\n            "Resource": "arn:aws:ses:YOUR_AWS_REGION:YOUR_AWS_ACCOUNT_ID:identity/YOUR_VERIFIED_EMAIL@example.com"\n        }\n    ]\n}\n'})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": Replace the placeholder ",(0,r.jsx)(n.code,{children:"Resource"})," ARN with the actual ARN of your verified SES identity."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-4-configure-environment-credentials-crucial",children:"Step 4: Configure Environment Credentials (Crucial!)"}),"\n",(0,r.jsx)(n.p,{children:"To run the app, you need to provide your own credentials for various services. We provide example files that you must copy and fill in."}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"A Note on Environment Variables"}),": We are currently not using ",(0,r.jsx)(n.code,{children:"react-native-config"})," due to instability with native file integration on React Native's New Architecture (Fabric). Therefore, configuration must be done directly in the native project files as described below."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"a-javascript-variables",children:"A. JavaScript Variables"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Copy the example file to create your local configuration:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cp apps/mobileAppYC/src/config/variables.ts apps/mobileAppYC/src/config/variables.local.ts\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"apps/mobileAppYC/src/config/variables.local.ts"})," and replace the placeholder values with your actual API keys and credentials."]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": The ",(0,r.jsx)(n.code,{children:"variables.local.ts"})," file is gitignored and will never be committed. The main ",(0,r.jsx)(n.code,{children:"variables.ts"})," file contains safe defaults for CI/CD and is automatically committed to the repository. Your local credentials in ",(0,r.jsx)(n.code,{children:"variables.local.ts"})," will be loaded automatically when present."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"b-android-native-configuration",children:"B. Android Native Configuration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Firebase"}),": Download your ",(0,r.jsx)(n.code,{children:"google-services.json"})," file from Firebase and place it in the ",(0,r.jsx)(n.code,{children:"android/app/"})," directory."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other Keys"}),": Copy the sample ",(0,r.jsx)(n.code,{children:"strings.xml"})," file:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cp docs/android/app/src/main/res/values/stringsXml\\(Example\\).txt android/app/src/main/res/values/strings.xml\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"android/app/src/main/res/values/strings.xml"})," and fill in all the required values."]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"c-ios-native-configuration",children:"C. iOS Native Configuration"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Firebase"}),": Download your ",(0,r.jsx)(n.code,{children:"GoogleService-Info.plist"})," file from Firebase. Place it in ",(0,r.jsx)(n.code,{children:"apps/mobileAppYC/ios/mobileAppYC/"})," and ",(0,r.jsx)(n.strong,{children:"add it to the project using Xcode"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Other Keys"}),": Copy the sample ",(0,r.jsx)(n.code,{children:"Info.plist"})," file:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"cp docs/ios/mobileAppYC/Infoplist\\(Example\\).txt apps/mobileAppYC/ios/mobileAppYC/Info.plist\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Open ",(0,r.jsx)(n.code,{children:"apps/mobileAppYC/ios/mobileAppYC/Info.plist"})," and input your keys where indicated."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-5-update-application-identifiers",children:"Step 5: Update Application Identifiers"}),"\n",(0,r.jsx)(n.p,{children:"For a clean build, change the default package name (Android) and bundle identifier (iOS)."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Android"}),": In ",(0,r.jsx)(n.code,{children:"android/app/build.gradle"}),", change the ",(0,r.jsx)(n.code,{children:"applicationId"})," from ",(0,r.jsx)(n.code,{children:'"com.mobileappyc"'})," to your own. Also, refactor the directory structure under ",(0,r.jsx)(n.code,{children:"android/app/src/main/java/"})," to match."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"iOS"}),": In Xcode, open ",(0,r.jsx)(n.code,{children:"apps/mobileAppYC/ios/mobileAppYC.xcworkspace"}),', go to the "General" tab, and change the ',(0,r.jsx)(n.strong,{children:"Bundle Identifier"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"step-6-run-the-application",children:"Step 6: Run The Application"}),"\n",(0,r.jsxs)(n.p,{children:["All commands below should be run from this directory (",(0,r.jsx)(n.code,{children:"apps/mobileAppYC"}),")."]}),"\n",(0,r.jsx)(n.h4,{id:"1-start-the-metro-server",children:"1. Start the Metro Server"}),"\n",(0,r.jsx)(n.p,{children:"Open a terminal and keep it running."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Using pnpm\npnpm start\n"})}),"\n",(0,r.jsx)(n.h4,{id:"2-build-for-android-or-ios",children:"2. Build for Android or iOS"}),"\n",(0,r.jsxs)(n.p,{children:["Open a ",(0,r.jsx)(n.strong,{children:"new"})," terminal window."]}),"\n",(0,r.jsx)(n.h5,{id:"\ufe0f-android",children:"\u25b6\ufe0f Android"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"pnpm run android\n"})}),"\n",(0,r.jsx)(n.h5,{id:"\ufe0f-ios",children:"\u25b6\ufe0f iOS"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sh",children:"# Navigate to the iOS directory to install pods\ncd ios\nbundle install\nbundle exec pod install\ncd ..\n\n# Run the app\npnpm run ios\n"})}),"\n",(0,r.jsx)(n.p,{children:"If everything is set up correctly, you should see the app running. \u2728"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udc1b Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:"If you encounter any issues, please refer to the official documentation first:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://reactnative.dev/docs/troubleshooting",children:"React Native Troubleshooting Guide"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-known-issues",children:"\u26a0\ufe0f Known Issues"}),"\n",(0,r.jsx)(n.p,{children:"The following are known bugs that are expected to be resolved in future releases of React Native or related library dependencies."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Issue 1053: iOS/Android Build Issue with Library Compatibility"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Link: ",(0,r.jsx)(n.a,{href:"https://github.com/YosemiteCrew/Yosemite-Crew/issues/1053",children:"https://github.com/YosemiteCrew/Yosemite-Crew/issues/1053"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"-contributing",children:"\ud83d\ude4c Contributing"}),"\n",(0,r.jsxs)(n.p,{children:["We love contributions! Please read our ",(0,r.jsx)(n.a,{href:"https://github.com/YosemiteCrew/Yosemite-Crew/blob/main/CONTRIBUTING.md",children:(0,r.jsx)(n.strong,{children:"Contributing Guide"})})," to get started."]})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},2303:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var s=i(2155);const r={},t=s.createContext(r);function o(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);